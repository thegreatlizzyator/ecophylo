---
title: "run_utils"
author: "Maxime Jaunatre"
date: "18/02/2021"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(reticulate)
```

Small bit of code to help debug. Objective is to regroup here all examples of the python code.


## Simplification of the msprime simulation process

```{python}
import math
import msprime



msprime.simulate(sample_size= 10, Ne = 100,
                 random_seed= 42, demographic_events = demography)

# initial pop size
pop1 = 500
pop2 = 200
gr1 = 0.05
gr2 = 0.05

samp1 = 5
samp2 = 4

population_configurations = [
  msprime.PopulationConfiguration(
    sample_size=2,
    initial_size=pop1 , 
    growth_rate = 0.02
    ),
    
  msprime.PopulationConfiguration(
    sample_size = 3,
    initial_size=pop2, 
    growth_rate=gr2)
]

migration_matrix = [
  [ 0, 1],
  [ 1, 0]
]

demographic_events = []
#   # msprime.PopulationParametersChange(
#     # time= 20, growth_rate=0.05, population_id=0),
#     msprime.PopulationParametersChange(
#     time= 20, initial_size=500, population_id=0)
# ]

dd = msprime.DemographyDebugger(
  population_configurations=population_configurations,
  migration_matrix=migration_matrix,
  demographic_events=demographic_events)
print(dd)
dd.print_history(output=sys.stderr)

treeseq = msprime.simulate(
  random_seed= 42,
  population_configurations = population_configurations,
  migration_matrix = migration_matrix,
  demographic_events = demographic_events)
  
tree = treeseq.first()
print(tree.draw(format = 'unicode'))

```


